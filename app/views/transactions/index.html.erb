<div class="container mt-4">
<h1 class="mb-4">Allowance Transactions</h1>

<table class="table table-bordered">
  <thead>
    <tr>
      <th>Category</th>
      <th>Amount</th>
      <th>Description</th>
      <th>Date</th>
    </tr>
  </thead>
  <tbody>
    <% @allowance_events.each do |event| %>
      <tr>
        <td><%= event.event_type %></td>
        <td><%= event.amount %></td>
        <td><%= event.description %></td>
        <td><%= event.timestamp.strftime('%B %d, %Y at %I:%M %p') %></td>
        <td>
          <%= button_to transaction_path(event), method: :delete, data: { confirm: 'Are you sure you want to delete this transaction?' }, class: 'btn btn-link p-0' do %>
            <i class="fas fa-trash"></i>
          <% end %>
      </td>
      </tr>
    <% end %>
  </tbody>
</table>

<h2 class="mb-3">Add New Transaction</h2>
<%= form_with(model: @new_allowance_event, url: transactions_path, method: 'post', local: true) do |form| %>
  <div class="form-group">
    <%= form.label :event_type, 'Category:', class: 'form-label' %>
    <%= form.select :event_type, ['spending', 'savings', 'giving'], {}, class: 'form-control' %>
  </div>
  <div class="form-group">
    <%= form.label :amount, 'Amount:', class: 'form-label' %>
    <%= form.number_field :amount, step: '0.01', class: 'form-control' %>
  </div>
  <div class="form-group">
    <%= form.label :description, 'Description:', class: 'form-label' %>
    <%= form.text_field :description, class: 'form-control' %>
    </div>
    <div class="form-group">
    <%= form.submit 'Add Transaction', class: 'btn btn-primary' %>
    </div>
    <% end %>

    <br>

    <%= link_to 'Back to Dashboard', root_path, class: 'btn btn-link' %>
    </div>
